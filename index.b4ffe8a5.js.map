{"mappings":"AAGA,MAAMA,EAAO,CACTC,WAAYC,SAASC,cAAc,gBACnCC,YAAaF,SAASC,cAAc,cACpCE,WAAYH,SAASC,cAAc,aAEjCG,EAAiB,ICRR,MAMXC,gBACIC,QAAQC,IAAI,aAAuBC,MAC1B,MAAHC,EAAK,8BAA8BD,KAAKE,uEAAuEF,KAAKG,+DAE3H,OAAOC,MAAMH,GACXI,MAAKC,GAAWA,EAASC,SACzBF,MAAKG,IACFR,KAAKS,gBACED,EAAKE,O,CAI6BD,gBACzCT,KAAKG,MAAQ,C,CAGiBQ,YAC9BX,KAAKG,KAAO,C,CAGhBS,YACA,OAAOZ,KAAKE,W,CAGfU,UAAMC,GACPb,KAAKE,YAAaW,C,CA9BlBC,cAEId,KAAKE,YAAc,GACnBF,KAAKG,KAAO,C,GDMpBb,EAAKC,WAAWwB,iBAAiB,UAKjC,SAAmBC,GACfA,EAAEC,iBACFrB,EAAegB,MAAQI,EAAEE,cAAcC,SAASjB,YAAYkB,MAC5DxB,EAAee,YAEff,EAAeC,gBACdQ,MAAKG,GAAQa,EAAeb,KAC5BH,KAAKiB,E,IAXVhC,EAAKI,YAAYqB,iBAAiB,SAclC,SAAoBC,GAChBpB,EAAeC,gBACdQ,MAAKG,GAAQa,EAAeb,KAC5BH,KAAKiB,E,IAYV,SAASD,EAAeX,GAwBlB,OAtBeA,EAAKa,KAAIC,GAAO,2DAGrBA,EAAIC,uBAAuBD,EAAIE,wGAGlCF,EAAIG,kEAGJH,EAAII,kEAGJJ,EAAIK,qEAGJL,EAAIM,6D,CAUjB,SAASR,EAAsBS,GAC3BzC,EAAKK,WAAWqC,UAAYD,C","sources":["src/index.js","src/news-api-service.js"],"sourcesContent":["import axios from 'axios';\nimport NewsApiService from './news-api-service';\n\nconst refs = {\n    searchForm: document.querySelector('.search-form'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    divGallery: document.querySelector('.gallery'),\n}\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nlet searchQuery = '';\n\nfunction onSearch (e) {\n    e.preventDefault();\n    newsApiService.query = e.currentTarget.elements.searchQuery.value;\n    newsApiService.resetPage();\n\n    newsApiService.fetchArticles()\n    .then(data => renderArticles(data))\n    .then(appendArticklesMarkup);\n}\n\nfunction onLoadMore(e) {\n    newsApiService.fetchArticles()\n    .then(data => renderArticles(data))\n    .then(appendArticklesMarkup);  \n}\n\n\n// / webformatURL - ссылка на маленькое изображение для списка карточек.\n// largeImageURL - ссылка на большое изображение.\n// tags - строка с описанием изображения. Подойдет для атрибута alt.\n// likes - количество лайков.\n// views - количество просмотров.\n// comments - количество комментариев.\n// downloads - количество загрузок.\nlet imageHit = '';\nfunction renderArticles(hits) {\n\n    const imageHit = hits.map(hit => `\n     \n    /* <div class=\"photo-card\">\n    <img src=\"${hit.largeImageURL}\" alt=\"${hit.tags}\" width=400px loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>${hit.likes}</b>\n      </p>\n      <p class=\"info-item\">\n        <b>${hit.views}</b>\n      </p>\n      <p class=\"info-item\">\n        <b>${hit.comments}</b>\n      </p>\n      <p class=\"info-item\">\n        <b>${hit.downloads}</b>\n      </p>\n    </div>\n  </div> */\n     `\n      );\n\n      return imageHit;\n}\n\nfunction appendArticklesMarkup(text) {\n    refs.divGallery.innerHTML = text;\n    \n}\n// function appendArticlesLoadMore(text) {\n//     refs.divGallery.insertAdjacentHTML('beforeend', )\n// }","export default class NewsApiService{\n    constructor(){\n        // в конструкторе задаем значение глобальной переменной\n        this.searchQuery = '';\n        this.page = 1;\n    }\n    fetchArticles(){\n        console.log('до запроса', this)\n        const url =`https://pixabay.com/api/?q=${this.searchQuery}&key=38261227-21424640981700fd9c4931e5f&per_page=40&page=${this.page}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n       return fetch(url)\n        .then(response =>response.json())\n        .then(data =>{\n            this.incrementPage();\n            return data.hits;\n        });\n        }\n        // увеличиваем страницу на 1 при каждом успешном запросе\n        incrementPage() {\n            this.page += 1;\n        }\n        // сбрасываем страничку при новом запросе\n        resetPage() {\n            this.page = 1;\n        }\n        // добавлем геттер\n    get query() {\n        return this.searchQuery;\n    }\n    // перезаписываем значение сеттером\n set query(newQuery) {\n    this.searchQuery= newQuery;\n }\n}"],"names":["$1f0dc3b9307be026$var$refs","searchForm","document","querySelector","loadMoreBtn","divGallery","$1f0dc3b9307be026$var$newsApiService","fetchArticles","console","log","this","url","searchQuery","page","fetch","then","response","json","data","incrementPage","hits","resetPage","query","newQuery","constructor","addEventListener","e","preventDefault","currentTarget","elements","value","$1f0dc3b9307be026$var$renderArticles","$1f0dc3b9307be026$var$appendArticklesMarkup","map","hit","largeImageURL","tags","likes","views","comments","downloads","text","innerHTML"],"version":3,"file":"index.b4ffe8a5.js.map"}